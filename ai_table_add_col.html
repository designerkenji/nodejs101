<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Table with Toggle State Icon</title>
    <style>
        table {
            width: 100%;
            border-collapse: collapse;
        }
        th, td {
            border: 1px solid #000;
            padding: 10px;
            text-align: center;
        }
        th {
            cursor: pointer;
        }
        .hidden {
            display: none;
        }
        .toggle-icon {
            font-size: 20px;
            margin-right: 5px;
        }
    </style>
</head>
<body>

<table id="myTable">
    <thead>
        <!-- The header row will be generated by JavaScript -->
    </thead>
    <tbody>
        <!-- Rows will be dynamically populated from the tableData array -->
    </tbody>
</table>

<button onclick="addColumnToArray()">Add Column</button>

<script>
    // Initialize a two-dimensional array with 15 rows and 3 columns, including column headers
    let tableData = [
        ['Column 1', 'Column 2', 'Column 3'],
        ['<span id="toggleIcon" class="toggle-icon">+</span> Row 1, Cell 1', 'Row 1, Cell 2', 'Row 1, Cell 3'],
        ['Row 2, Cell 1', 'Row 2, Cell 2', 'Row 2, Cell 3'],
        ['Row 3, Cell 1', 'Row 3, Cell 2', 'Row 3, Cell 3'],
        ['Row 4, Cell 1', 'Row 4, Cell 2', 'Row 4, Cell 3'],
        ['Row 5, Cell 1', 'Row 5, Cell 2', 'Row 5, Cell 3'],
        ['Row 6, Cell 1', 'Row 6, Cell 2', 'Row 6, Cell 3'],
        ['Row 7, Cell 1', 'Row 7, Cell 2', 'Row 7, Cell 3'],
        ['Row 8, Cell 1', 'Row 8, Cell 2', 'Row 8, Cell 3'],
        ['Row 9, Cell 1', 'Row 9, Cell 2', 'Row 9, Cell 3'],
        ['Row 10, Cell 1', 'Row 10, Cell 2', 'Row 10, Cell 3'],
        ['Row 11, Cell 1', 'Row 11, Cell 2', 'Row 11, Cell 3'],
        ['Row 12, Cell 1', 'Row 12, Cell 2', 'Row 12, Cell 3'],
        ['Row 13, Cell 1', 'Row 13, Cell 2', 'Row 13, Cell 3'],
        ['Row 14, Cell 1', 'Row 14, Cell 2', 'Row 14, Cell 3'],
        ['Row 15, Cell 1', 'Row 15, Cell 2', 'Row 15, Cell 3']
    ];

    // Function to populate the table from the array
    function populateTableFromArray() {
        const table = document.getElementById('myTable');
        const thead = table.querySelector('thead');
        const tbody = table.querySelector('tbody');

        // Clear existing table rows
        thead.innerHTML = '';
        tbody.innerHTML = '';

        // Populate the header row
        const headerRow = document.createElement('tr');
        for (let i = 0; i < tableData[0].length; i++) {
            const headerCell = document.createElement('th');
            headerCell.innerHTML = tableData[0][i];
            headerCell.onclick = function() { deleteColumn(i); };
            headerRow.appendChild(headerCell);
        }
        thead.appendChild(headerRow);

        // Populate the table with data from the array
        for (let i = 1; i < tableData.length; i++) {
            const row = document.createElement('tr');

            // Add class 'hidden' to initially hide rows 2 and 3
            if (i === 2 || i === 3) {
                row.classList.add('hidden');
            }

            for (let j = 0; j < tableData[i].length; j++) {
                const cell = document.createElement('td');
                cell.innerHTML = tableData[i][j];

                // Add click event listener to Row 1, Cell 1 to toggle visibility of Row 2 and Row 3
                if (i === 1 && j === 0) {
                    cell.onclick = function() { toggleRowsVisibility(); };
                }

                row.appendChild(cell);
            }
            tbody.appendChild(row);
        }
    }

    // Call this function to add a new column to the array and update the table
    function addColumnToArray() {
        // Add new column (cell) to each row in the array
        tableData[0].push(`Column ${tableData[0].length + 1}`);
        for (let i = 1; i < tableData.length; i++) {
            tableData[i].push(`Row ${i}, Cell ${tableData[i].length + 1}`);
        }

        // Repopulate the table
        populateTableFromArray();
    }

    // Call this function to delete a column from the array and update the table
    function deleteColumn(index) {
        // Remove the specified column from each row in the array
        for (let i = 0; i < tableData.length; i++) {
            tableData[i].splice(index, 1);
        }

        // Repopulate the table
        populateTableFromArray();
    }

    // Call this function to toggle the visibility of rows 2 and 3
    function toggleRowsVisibility() {
        const table = document.getElementById('myTable');
        const rows = table.querySelectorAll('tbody tr');
        const toggleIcon = document.getElementById('toggleIcon');

        rows[1].classList.toggle('hidden'); // Row 2
        rows[2].classList.toggle('hidden'); // Row 3

        // Update the icon based on the visibility of rows 2 and 3
        if (rows[1].classList.contains('hidden') && rows[2].classList.contains('hidden')) {
            toggleIcon.innerText = '+';
        } else {
            toggleIcon.innerText = '-';
        }
    }

    // Populate the initial table data when the page loads
    populateTableFromArray();
</script>

</body>
</html>
